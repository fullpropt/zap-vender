<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configura√ß√µes | SELF Prote√ß√£o Veicular</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
        }
        
        .settings-card {
            background: var(--white);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        }
        
        .settings-card h3 {
            font-size: 18px;
            color: var(--dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .settings-item {
            padding: 16px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .settings-item:last-child {
            border-bottom: none;
        }
        
        .settings-item label {
            display: block;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
        }
        
        .settings-item p {
            font-size: 13px;
            color: var(--gray);
            margin-bottom: 12px;
        }
        
        .settings-item input,
        .settings-item select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 14px;
        }
        
        .settings-item input:focus,
        .settings-item select:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-light);
            transition: 0.3s;
            border-radius: 26px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }
        
        .toggle-switch input:checked + .toggle-slider {
            background-color: var(--primary);
        }
        
        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        .settings-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .danger-zone {
            border: 2px solid var(--danger);
            background: rgba(239, 68, 68, 0.05);
        }
        
        .danger-zone h3 {
            color: var(--danger);
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        
        .btn-danger:hover {
            background: #dc2626;
        }
        
        .btn-save {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            margin-top: 20px;
        }
        
        .btn-save:hover {
            background: var(--primary-dark);
        }
    </style>
</head>
<body>
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-logo">
            <img src="img/logo-self.png" alt="SELF Prote√ß√£o Veicular">
        </div>
        
        <ul class="sidebar-menu">
            <li>
                <a href="index.html">
                    <span class="icon">üìä</span>
                    Dashboard
                </a>
            </li>
            <li>
                <a href="funil.html">
                    <span class="icon">üìà</span>
                    Funil de Vendas
                </a>
            </li>
            <li>
                <a href="whatsapp.html">
                    <span class="icon">üí¨</span>
                    WhatsApp
                </a>
            </li>
            <li>
                <a href="configuracoes.html" class="active">
                    <span class="icon">‚öôÔ∏è</span>
                    Configura√ß√µes
                </a>
            </li>
        </ul>
        
        <div class="sidebar-footer">
            <button class="btn-logout" onclick="logout()">
                <span>üö™</span>
                Sair
            </button>
        </div>
    </aside>
    
    <button class="mobile-menu-toggle" onclick="toggleSidebar()">‚ò∞</button>
    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>
    
    <!-- MAIN CONTENT -->
    <main class="main-content">
        <div class="header">
            <div class="header-title">
                <h1>‚öôÔ∏è Configura√ß√µes</h1>
                <p>Personalize o sistema conforme suas necessidades</p>
            </div>
        </div>
        
        <div class="settings-grid">
            <!-- Configura√ß√µes Gerais -->
            <div class="settings-card">
                <h3>üè¢ Empresa</h3>
                
                <div class="settings-item">
                    <label>Nome da Empresa</label>
                    <input type="text" id="company-name" value="SELF Prote√ß√£o Veicular">
                </div>
                
                <div class="settings-item">
                    <label>Nome do Vendedor</label>
                    <input type="text" id="seller-name" value="Thyago">
                </div>
                
                <div class="settings-item">
                    <label>Telefone de Contato</label>
                    <input type="text" id="contact-phone" placeholder="(00) 00000-0000">
                </div>
                
                <button class="btn-save" onclick="saveCompanySettings()">üíæ Salvar</button>
            </div>
            
            <!-- Configura√ß√µes WhatsApp -->
            <div class="settings-card">
                <h3>üí¨ WhatsApp</h3>
                
                <div class="settings-item">
                    <div class="settings-row">
                        <div>
                            <label>Notifica√ß√µes de Mensagem</label>
                            <p>Receber notifica√ß√µes quando chegar mensagem</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="notifications" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-item">
                    <div class="settings-row">
                        <div>
                            <label>Som de Notifica√ß√£o</label>
                            <p>Tocar som ao receber mensagem</p>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="sound" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="settings-item">
                    <label>Delay entre Mensagens (segundos)</label>
                    <p>Tempo de espera entre envios em massa</p>
                    <input type="number" id="message-delay" value="3" min="1" max="60">
                </div>
                
                <button class="btn-save" onclick="saveWhatsAppSettings()">üíæ Salvar</button>
            </div>
            
            <!-- Templates -->
            <div class="settings-card">
                <h3>üìù Templates Padr√£o</h3>
                
                <div class="settings-item">
                    <label>Mensagem de Boas-vindas</label>
                    <p>Enviada automaticamente para novos leads</p>
                    <textarea id="welcome-template" style="width:100%;min-height:100px;padding:12px;border:2px solid var(--border);border-radius:10px;font-family:inherit;">Oi {{nome}}, tudo bem? üëã Aqui √© da *SELF Prote√ß√£o Veicular*! Vi que voc√™ tem interesse em proteger seu ve√≠culo. Posso te ajudar?</textarea>
                </div>
                
                <button class="btn-save" onclick="saveTemplateSettings()">üíæ Salvar</button>
            </div>
            
            <!-- Zona de Perigo -->
            <div class="settings-card danger-zone">
                <h3>‚ö†Ô∏è Zona de Perigo</h3>
                
                <div class="settings-item">
                    <label>Limpar Todos os Leads</label>
                    <p>Esta a√ß√£o n√£o pode ser desfeita. Todos os leads ser√£o exclu√≠dos permanentemente.</p>
                    <button class="btn-danger" onclick="clearAllLeads()">üóëÔ∏è Limpar Leads</button>
                </div>
                
                <div class="settings-item">
                    <label>Limpar Templates</label>
                    <p>Remove todos os templates personalizados e restaura os padr√µes.</p>
                    <button class="btn-danger" onclick="resetTemplates()">üîÑ Resetar Templates</button>
                </div>
                
                <div class="settings-item">
                    <label>Resetar Sistema</label>
                    <p>Limpa todos os dados e configura√ß√µes. O sistema volta ao estado inicial.</p>
                    <button class="btn-danger" onclick="resetSystem()">üí£ Resetar Tudo</button>
                </div>
            </div>
        </div>
    </main>
    
    <div class="toast-container" id="toast-container"></div>
    
    <script src="js/config.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            loadSettings();
        });
        
        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('self_settings') || '{}');
            
            if (settings.companyName) document.getElementById('company-name').value = settings.companyName;
            if (settings.sellerName) document.getElementById('seller-name').value = settings.sellerName;
            if (settings.contactPhone) document.getElementById('contact-phone').value = settings.contactPhone;
            if (settings.notifications !== undefined) document.getElementById('notifications').checked = settings.notifications;
            if (settings.sound !== undefined) document.getElementById('sound').checked = settings.sound;
            if (settings.messageDelay) document.getElementById('message-delay').value = settings.messageDelay;
            if (settings.welcomeTemplate) document.getElementById('welcome-template').value = settings.welcomeTemplate;
        }
        
        function saveSettings(newSettings) {
            const settings = JSON.parse(localStorage.getItem('self_settings') || '{}');
            Object.assign(settings, newSettings);
            localStorage.setItem('self_settings', JSON.stringify(settings));
        }
        
        function saveCompanySettings() {
            saveSettings({
                companyName: document.getElementById('company-name').value,
                sellerName: document.getElementById('seller-name').value,
                contactPhone: document.getElementById('contact-phone').value
            });
            showToast('success', 'Configura√ß√µes da empresa salvas!');
        }
        
        function saveWhatsAppSettings() {
            saveSettings({
                notifications: document.getElementById('notifications').checked,
                sound: document.getElementById('sound').checked,
                messageDelay: parseInt(document.getElementById('message-delay').value)
            });
            showToast('success', 'Configura√ß√µes do WhatsApp salvas!');
        }
        
        function saveTemplateSettings() {
            saveSettings({
                welcomeTemplate: document.getElementById('welcome-template').value
            });
            showToast('success', 'Template salvo!');
        }
        
        function clearAllLeads() {
            if (confirm('Tem certeza? Esta a√ß√£o n√£o pode ser desfeita!')) {
                if (confirm('√öLTIMA CHANCE! Todos os leads ser√£o exclu√≠dos permanentemente.')) {
                    localStorage.removeItem(CONFIG.STORAGE_KEYS.LEADS);
                    showToast('success', 'Todos os leads foram exclu√≠dos');
                }
            }
        }
        
        function resetTemplates() {
            if (confirm('Resetar todos os templates para o padr√£o?')) {
                localStorage.removeItem(CONFIG.STORAGE_KEYS.TEMPLATES);
                showToast('success', 'Templates resetados');
            }
        }
        
        function resetSystem() {
            if (confirm('ATEN√á√ÉO! Isso vai apagar TODOS os dados do sistema!')) {
                if (confirm('√öLTIMA CHANCE! Tem certeza absoluta?')) {
                    localStorage.clear();
                    showToast('success', 'Sistema resetado. Recarregando...');
                    setTimeout(function() {
                        window.location.reload();
                    }, 2000);
                }
            }
        }
        
        function showToast(type, message) {
            const container = document.getElementById('toast-container');
            const icons = { success: '‚úÖ', error: '‚ùå', warning: '‚ö†Ô∏è', info: '‚ÑπÔ∏è' };
            
            const toast = document.createElement('div');
            toast.className = 'toast ' + type;
            toast.innerHTML = `
                <span class="toast-icon">${icons[type]}</span>
                <span class="toast-message">${message}</span>
                <button class="toast-close" onclick="this.parentElement.remove()">‚úï</button>
            `;
            
            container.appendChild(toast);
            setTimeout(function() { if (toast.parentElement) toast.remove(); }, 3000);
        }
        
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
            document.querySelector('.sidebar-overlay').classList.toggle('active');
        }
        
        function logout() {
            if (confirm('Tem certeza que deseja sair?')) {
                window.location.href = 'index.html';
            }
        }
    </script>
</body>
</html>
