# ============================================
# SELF PROTEÇÃO VEICULAR - CONFIGURAÇÕES v4.0
# ============================================
# Copie este arquivo para .env e configure os valores

# Configurações do Servidor
PORT=3001
HOST=0.0.0.0
NODE_ENV=production

# Diretórios
SESSIONS_DIR=/mnt/data/sessions
UPLOAD_DIR=./uploads

# Banco de Dados (Postgres)
DATABASE_URL=postgresql://usuario:senha@host:5432/banco

# ============================================
# SEGURANÇA (OBRIGATÓRIO EM PRODUÇÃO)
# ============================================

# Chave secreta para tokens JWT (mínimo 32 caracteres)
# Gere uma chave segura: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=sua-chave-secreta-super-segura-aqui-min-32-chars

# Chave para criptografia de mensagens (32 caracteres)
ENCRYPTION_KEY=chave-de-criptografia-32-caracteres

# ============================================
# WHATSAPP
# ============================================

# ID da sessão WhatsApp (não altere se não souber o que está fazendo)
WHATSAPP_DEFAULT_SESSION_ID=default_whatsapp_session
SESSION_ID=

# Timeout do QR Code em milissegundos (padrão: 60 segundos)
QR_TIMEOUT=60000

# Tentativas máximas de reconexão
MAX_RECONNECT_ATTEMPTS=5

# Delay entre tentativas de reconexão (ms)
RECONNECT_DELAY=3000

# ============================================
# FILA DE MENSAGENS
# ============================================

# Delay entre mensagens em massa (ms) - evita bloqueios
BULK_MESSAGE_DELAY=3000

# Máximo de mensagens por minuto
MAX_MESSAGES_PER_MINUTE=30

# ============================================
# WEBHOOKS
# ============================================

# Chave secreta para validar webhooks de entrada
WEBHOOK_SECRET=webhook-secret-key

# URL padrão para webhooks de saída (opcional)
WEBHOOK_URL=

# ============================================
# RATE LIMITING
# ============================================

# Janela de tempo para rate limit (ms)
RATE_LIMIT_WINDOW_MS=60000

# Máximo de requisições por janela
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# UPLOAD DE ARQUIVOS
# ============================================

# Tamanho máximo de arquivo
MAX_FILE_SIZE=50mb

# ============================================
# FUNCIONALIDADES
# ============================================

# Habilitar construtor de fluxos
FLOW_BUILDER_ENABLED=true

# Classificador de intencao por IA (Gemini) para gatilhos keyword
FLOW_INTENT_CLASSIFIER_ENABLED=true
GEMINI_API_KEY=sua-chave-api-gemini
GEMINI_MODEL=gemini-2.0-flash-lite
FLOW_INTENT_CLASSIFIER_MIN_CONFIDENCE=0.70
FLOW_INTENT_CLASSIFIER_STRICT=false
FLOW_INTENT_CLASSIFIER_MIN_CANDIDATES=1
FLOW_INTENT_CLASSIFIER_MAX_CANDIDATES=5
GEMINI_REQUEST_TIMEOUT_MS=4500
GEMINI_QUOTA_BACKOFF_MS=600000
FLOW_INTENT_FUZZY_THRESHOLD=0.34
FLOW_INTENT_FUZZY_MIN_SCORE=0.58
FLOW_INTENT_FUZZY_MIN_TOKEN_COVERAGE=0.45

# URL do Frontend
FRONTEND_URL=https://seu-app.railway.app

# ============================================
# CORS (Cross-Origin Resource Sharing)
# ============================================

# Origens permitidas (separadas por vírgula)
# Exemplo: http://localhost:3000,https://app.exemplo.com
# Use * para permitir todas (NÃO RECOMENDADO EM PRODUÇÃO)
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

